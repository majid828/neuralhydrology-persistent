                                                                                                                                                                                                                                                                                      /home/mhshah1/configs/config_persistent.yml
# --- Experiment cofigurations --------------------------------------------------------------------
train_basin_file: /mnt/disk1/CAMELS_US/basin_lists/list_250_OWP.txt
validation_basin_file: /mnt/disk1/CAMELS_US/basin_lists/list_250_OWP.txt
test_basin_file: /mnt/disk1/CAMELS_US/basin_lists/list_250_OWP.txt


run_dir: /home/mhshah1/runs/persistent_4basins_seq_sweep
experiment_name: persistent_4basins


train_start_date: '01/01/2010'
train_end_date: '30/09/2013'
validation_start_date: '01/10/2013'
validation_end_date: '30/09/2014'
test_start_date: '01/10/2014'
test_end_date: '30/09/2015'

seed: 111
device: cuda:1

# --- Validation configuration ---------------------------------------------------------------------
validate_every: 3
validate_n_random_basins: 100
cache_validation_data: True
metrics:
  - NSE
  - KGE
  - Alpha-NSE
  - Beta-NSE

# --- Model configuration --------------------------------------------------------------------------
model: persistentlstm
#model: cudalstm
head: regression
output_activation: linear

hidden_size: 256
initial_forget_bias: 3
output_dropout: 0.3

persistent_state: true
nan_handling_method: masked


# --- Evaluation warm-up -----------------------------------------------------------------
eval_warmup_steps: 336


optimizer: Adam
loss: MSE


  #0: 0.001
  #2: 0.0009
  #3: 0.0008
  #6: 0.0007
  #9: 0.0003
  #10: 0.0001
  #13: 0.00009
  #15: 0.00007
  #16: 0.00005
 # 18: 0.00003
#  20: 0.00001


learning_rate:
  0: 0.001
  2: 0.0009
  3: 0.0008
  6: 0.0007
  9: 0.0003
  12: 0.0001
  13: 0.00001
  #15: 0.00007
  #16: 0.00005
  #18: 0.00003
  #20: 0.00001


batch_size: 16
epochs: 50
clip_gradient_norm: 1

#seq_length: &SEQ 12
#predict_last_n: *SEQ

seq_length:
  15min: &SEQ 12

predict_last_n:
  15min: *SEQ

num_workers: 8
log_interval: 50
log_tensorboard: False
log_n_figures: 0
save_weights_every: 5
save_validation_results: False

# --- Data configurations --------------------------------------------------------------------------
dataset: fifteenmin_camels_us
data_dir: /mnt/disk1/CAMELS_US/
forcings: aorc_hourly


# NEW: run the whole experiment at 15-minute timestep
use_frequencies: ["15min"]

# NEW: tell the dataset where your TRUE 15-min discharge (target) lives
qobs_15min_dir: /mnt/disk1/CAMELS_US/15min


dynamic_inputs:
  - APCP_surface
  - TMP_2maboveground
  - DLWRF_surface
  - DSWRF_surface
  - PRES_surface
  - SPFH_2maboveground
  - UGRD_10maboveground
  - VGRD_10maboveground

target_variables:  ["qobs_cfs"]

static_attributes:
  - ari_ix_mean
  - slp_dg_mean
  - centroid_y
  - ims_pc_mean
  - ele_mt_mean
  - snd_pct
  - cly_pct
  - for_pc_forest_sse
  - lka_pc_sse
  - areasqkm

# --- Persistent sampling configuration ------------------------------------------------------------
non_overlapping_sequences: true
seq_stride: *SEQ
